<!--
  Generated template for the Product page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-border>

    <ion-navbar>
        <ion-title *ngIf="isNotSearching()">
            <ion-icon name="{{ categoryIcon }}"></ion-icon> {{ categoryTitle }}
        </ion-title>

        <ion-buttons end *ngIf="isNotSearching()">
            <button id="#cart" ion-button icon-only (click)="goToCartPage()">
                <ion-icon name="cart"></ion-icon>
                <ion-badge color="secondary" *ngIf="hasCartValue()">{{ getTotalCart() | currency:'BRL':true:'1.2-2' }}</ion-badge>
            </button>
            <button ion-button icon-only (click)="startSearch($event)">
                <ion-icon name="search"></ion-icon>
            </button>
        </ion-buttons>

        <ion-searchbar #search *ngIf="isSearching()" placeholder="Busca de produtos"
                       animated="true" showCancelButton="false"
                       (ionBlur)="onBlur($event)" (ionInput)="onInput($event)"
                       (ionCancel)="onCancel($event)" (ionClear)="onClear($event)">

        </ion-searchbar>
    </ion-navbar>

</ion-header>


<ion-content padding>
    <ion-fab right bottom>
        <button (click)="scrollToTop()" ion-fab mini *ngIf="showToTop">
            <ion-icon name="arrow-dropup-circle"></ion-icon>
        </button>
        <button (click)="scrollUp(106)" ion-fab mini>
            <ion-icon name="arrow-dropup"></ion-icon>
        </button>
        <button (click)="scrollDown(106)" ion-fab mini>
            <ion-icon name="arrow-dropdown"></ion-icon>
        </button>
    </ion-fab>
    <div *ngFor="let product of products" padding-top text-center
         class="productBlock">

        <img cache="true" width="80" height="80" alt="Imagem do produto: {{product.nome}}"
                 src="https://storage.googleapis.com/ilhanet-140808.appspot.com/thumbnails/{{product.imagem}}">

        <div style="" padding-left padding-right>
            <h4 style="">
                <span *ngIf="hasInCart(product.id)">{{ getCartQnty(product.id) }} x </span>
                {{product.valorUnitVenda | currency:'BRL':true:'1.2-2'}}
            </h4>
            <p>{{ product.nome }}</p>
        </div>

        <ion-row>
            <!--<ion-col>-->
                <!--<button no-padding ion-button icon-only clear>-->
                    <!--<ion-icon name="heart-outline" color="danger"></ion-icon>-->
                <!--</button>-->
            <!--</ion-col>-->
            <ion-col text-center>
                <button ion-button icon-only outline (click)="removeToCart(product.id)">
                    <ion-icon name="remove"></ion-icon>
                </button>
            </ion-col>
            <ion-col text-center>
                <button ion-button icon-only outline (click)="presentPopover($event);addToCart(product.id)">
                    <ion-icon name="add"></ion-icon>
                </button>
            </ion-col>
        </ion-row>
    </div>
</ion-content>

<ion-footer *ngIf="connectivityMonitorService.isOffline()">
    <ion-toolbar color="warn">
        <p text-center>
            <ion-icon name="warning"></ion-icon>
            Ops! Sem conex√£o com nossos servidores no momento
        </p>
    </ion-toolbar>
</ion-footer>